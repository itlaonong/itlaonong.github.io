(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{502:function(s,a,t){"use strict";t.r(a);var n=t(31),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"下载-gradle-并配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-gradle-并配置环境变量"}},[s._v("#")]),s._v(" 下载 gradle 并配置环境变量")]),s._v(" "),t("p",[s._v("完成后在命令行输入 gradle -v，查看是否配置正确。")]),s._v(" "),t("h1",{attrs:{id:"建立配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立配置文件"}},[s._v("#")]),s._v(" 建立配置文件")]),s._v(" "),t("p",[s._v("在项目根目录新建名为 build.gradle 的配置文件。")]),s._v(" "),t("p",[s._v("文件中写入如下配置：")]),s._v(" "),t("div",{staticClass:"language-groovy line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-groovy"}},[t("code",[s._v("apply plugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'war'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 JDK 版本")]),s._v("\nsourceCompatibility "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 WebApp 根目录")]),s._v("\nwebAppDirName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'WebRoot'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 Java 源码所在目录")]),s._v("\nsourceSets "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    main "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多个目录 srcDirs 单个用 srcDir ''")]),s._v("\n            srcDirs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'soo'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src/main/java'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'coresrc/main/java'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        resources"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多个目录 srcDirs 单个用 srcDir ''")]),s._v("\n            srcDirs "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src/main/resources'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'coresrc/main/resources'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 maven 库地址")]),s._v("\nrepositories "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    maven "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("url "),t("span",{pre:!0,attrs:{class:"token interpolation-string"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://maven.aliyun.com/nexus/content/groups/public/"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mavenLocal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\ndependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    tasks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("withType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("JavaCompile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encoding "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token interpolation-string"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GBK"')])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 本地依赖")]),s._v("\n    compileOnly "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F:/lib/weblogic.jar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F:/lib/ojdbc14.jar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 有网络是用maven")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// providedCompile 'javax.servlet:servlet-api:2.5' // 编译期")]),s._v("\n    compile "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fileTree")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'WebRoot/WEB-INF/lib'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" include"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.jar'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("p",[s._v("因为我的项目有多个 java 源文件目录和资源目录所以配置的是 srcDirs。如果只有一个目录，配置 srcDir 即可。至于每个配置项什么含义就需要自己找资料了，基本实现打包功能不需要很多的配置，像 srcDir 就是配置一下 java 源代码位置就好了。")]),s._v(" "),t("h1",{attrs:{id:"编译打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译打包"}},[s._v("#")]),s._v(" 编译打包")]),s._v(" "),t("p",[s._v("在项目根目录打开命令行窗口，输入指令 gradle clean build。如果成功会在结束时出现 BUILD 　 SUCCESSFUL。如果没有请查看报错信息，针对性的修改 build.gradle 里面的配置。")]),s._v(" "),t("p",[s._v("打包完成的 war 包就在 ./build/libs/目录下。")]),s._v(" "),t("h1",{attrs:{id:"扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[s._v("#")]),s._v(" 扩展")]),s._v(" "),t("p",[s._v("上面说的都是自己用的，那么要是团队都来使用 gradle，该如何统一。")]),s._v(" "),t("p",[s._v("假如现在项目组的同事也想和我一样使用 gradle 打包，直接的做法就是我将 build.gradle 提交 svn，大家更新下来，安装 gradle 后，更改自己的本地依赖位置（其实既然使用了 gradle，依赖可以都放到 maven 私有仓库，这样大家可以共用一套配置）。运行 gradle clean build 即可打包。")]),s._v(" "),t("p",[s._v("按照上面的做法，其实 gradle 和 maven 除了配置文件不同，基本没啥区别了。其实 gradle 提供了另一套便于统一协作的机制-gradlew（后来发现 maven 好像也有类似的功能，是我肤浅了）。使用 gradlew 需要在项目根目录执行 gradle init 命令。会生成 wapper 的配置文件。可以将这些文件一同提交 svn，其他同事更新后无需安装 gradle，直接执行 gradlew clean build。gradle 会查找本地的 gradle 环境，没有的话会根据 wapper 配置去互联网下载对应版本的 gradle 进行编译打包。省去自行下载配置环境，还可以保持大家 gradle 版本的统一。")]),s._v(" "),t("p",[s._v("当然了，国内特殊原因，以及每个开发者所处的网络环境不同，下载速度也会受影响。上面的做法不一定能行的通，如果条件不允许，还是自己手动下载 gradle 并进行配置。")])])}),[],!1,null,null,null);a.default=r.exports}}]);